// Generated by CoffeeScript 1.4.0
(function() {
  var loadTool, _base, _ref, _ref1;

  if ((_ref = window.tacit) == null) {
    window.tacit = {};
  }

  if ((_ref1 = (_base = window.tacit).tools) == null) {
    _base.tools = {};
  }

  loadTool = {
    mouseDown: function(easel, eventType, mouseLoc, object) {
      var idx;
      this.dragging = true;
      if (eventType === "node" || eventType === "force") {
        this.selection = object;
        this.allowPan = false;
        idx = easel.pad.sketch.selectedNodes.indexOf(object);
        if (idx === -1) {
          easel.pad.sketch.selectedNodes.push(object);
        }
        return easel.pad.sketch.quickDraw();
      }
    },
    mouseUp: function(easel, eventType, mouseLoc, object) {
      var idx;
      if (window.tutorial_state === 4) {
        window.advance_tutorial();
      }
      this.dragging = false;
      if (this.selection) {
        if (object === this.selection && eventType === "node") {
          this.selection.force.x = 0;
          this.selection.force.y = 0;
        }
        idx = easel.pad.sketch.selectedNodes.indexOf(this.selection);
        easel.pad.sketch.selectedNodes.splice(idx, 1);
        easel.pad.sketch.quickDraw();
        return this.selection = null;
      }
    },
    mouseMove: function(easel, eventType, mouseLoc, object) {
      if (this.dragging && this.selection) {
        this.selection.force.x = 6 * (mouseLoc[0] - this.selection.x);
        this.selection.force.y = 6 * (mouseLoc[1] - this.selection.y);
        return easel.pad.sketch.quickDraw();
      }
    }
  };

  window.tacit.tools.load = loadTool;

}).call(this);
